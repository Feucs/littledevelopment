<!DOCTYPE html>
<html>
<title>Water Drinking Record</title>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <style>
  #pot {
  bottom: 15%;
  position: absolute;
  -webkit-animation: linear infinite;
  -webkit-animation-name: run;
  -webkit-animation-duration: 8s;
}
@-webkit-keyframes run {
  0% {
    left: 0;
  }
  48% {
    -webkit-transform: rotateY(0deg); 
  }
  50% { 
    left: calc(100% - 100px);
    -webkit-transform: rotateY(180deg); 
  }
  99% {
    -webkit-transform: rotateY(180deg); 
  }
  100% {
    left: 0;    
     -webkit-transform: rotateY(0deg);
  }
}
.card {
  flex-direction: row;
}
.card img {
  width: 40%;
}
</style>
</head>
<!-- Page Content -->
<body class="p-3 m-3">
  <br class="p-3 m-3">
    <nav class="navbar navbar-light bg-light m-0 p-0">
      <a class="navbar-brand" href="#">
        <img src="https://i.pinimg.com/originals/e9/c0/8d/e9c08d810eaf2a5601dfec188438f473.gif" width="58" height="45" class="d-inline-block align-top" alt="">
        <span class="navbar-text">Health Tracking System</span>
        <div id="pot">
          <img src="https://media1.giphy.com/media/hFVrwYJaIz0uk/giphy.gif?cid=790b7611b53c2f088d42e7642640814c8a5e613bc409ef11&rid=giphy.gif&ct=s" width=50px height=40px>
        </div>
      </a>
    </nav>
  <br/>
    
 <nav class="navbar navbar-light bg-light m-0 p-0">
      <a class="navbar-brand" href="#">
        <img src="https://www.shareicon.net/data/512x512/2016/08/18/810148_drink_512x512.png" width="32" height="30" class="m-2 ml-3 d-inline-block align-top" alt="">
        <span class="navbar-text">My Target</span>
      </a>
    </nav>
  
    <div class="m-2 progress">
      <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 33.5%">
          <span class="my-centered">75% Complete</span>
      </div>
    </div>
    
    <div class="showTarget">
    </div>
    <p class="m-2 text-center" id="watertarget">Water Recorded : 0 , My Target : 0</p>
    <p class="m-2 text-center"><button style="font-size: 0.8rem;" id="btn2" class="btn btn-primary">Set New Target</button></p>

    
    <!--history-->
 <nav class="navbar navbar-light bg-light m-0 p-0">
    <a class="navbar-brand" href="#">
      <img src="https://www.nicepng.com/png/detail/301-3019331_history-comments-order-history-icon-png.png" width="28" height="30" class="m-2 ml-3 d-inline-block align-top" alt="">
      <span class="ml-1 navbar-text">Drinks History</span>
    </a>
  </nav>
      <!--show history-->  
      <div class="latesthistory">
      </div>
      <div class="otherhistory">
      </div>

<p class="text-center m-2"><button style="font-size: 0.8rem;" id="btn1" class="btn btn-primary">Add Water</button></p>


</body>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</html>

<script>
  var data = window.AppInventor.getWebViewString();
  data = eval(data);

  $(document).ready(function(){

    //TotalDrink/Target*100
    
    percentage=data[1]/data[0]*100;
    percentage=percentage+"%";
    $('.progress-bar').css("width", percentage);
    $('.progress-bar').text(percentage);

    target = 'Water target: ' + data[0] + ', Recorded drinks: ' + data[1];
    $('#watertarget').text(target);

    $("#btn1").click(function () {
      getdata = 'Add Water';
      window.AppInventor.setWebViewString(getdata);
    });

    $("#btn2").click(function () {
      getdata = 'Set Water';
      window.AppInventor.setWebViewString(getdata);

    });	
  });


//GetHistoryRecord
var data = window.AppInventor.getWebViewString();
  data = eval(data);

  if (data.length < 1 || data[0].length < 1) {

    html = '<div class="m-2 fontsizes"><p class="text-center"> No record found</p></div>';
    jQuery(function ($) {

      $(".latesthistory").append(html);
      $(".otherhistory").append(html);

    });
  }

  else {
    for (var ix = 0; ix < data.length; ix++) {
      let i = ix

      if (i == 0) {

        jQuery(function ($) {

          html = '<div class="fontsizes mb-2">';
          html += '<div class="row mt-3 ">';
          html += '<div class="col text-center mycontent-left"><img id="clockicon"src="https://www.transparentpng.com/thumb/clock/amoxZ0-clock-clipart-hd.png" width="30" height="25"  alt=""></div>';
          html += '<div class="col text-center mycontent-left"><img id="drinkicon"src="https://cdn-icons-png.flaticon.com/512/1651/1651824.png" width="30" height="28"  alt=""></div>';
          html += '<div class="col text-center mycontent-left"><img id="targeticon"src="https://www.pngrepo.com/png/219421/512/target.png" width="30" height="25"  alt=""></div>';
          html += '</div>';

          html += '<div class="row">';
          html += '<div class="col text-center mycontent-left">Date :</div>';
          html += '<div class="col text-center mycontent-left">Volume Drink :</div>';
          html += '<div class="col text-center mycontent-left">Target :</div>';
          html += '</div>';

          html += '<div class="row ">';
          date = data[2][i][0].split(" ");
          html += '<div class="col text-center mycontent-left">' + date[0]+'<br/>'+date[1] + '</div>';
          html += '<div class="col text-center mycontent-left">' + data[2][i][1] + ' ml</div>';  //data[i][3] Drink
          html += '<div class="col text-center mycontent-left">' + data[0] + ' ml</div>';  //data[i][4] Target
          html += '</div>';

          html += '<div class="row mb-2">';

          //Target < Drink = Failed
          if (data[0] < data[1] == "Failed") {
            html += '<div class="col">Category : <span class="ml-2 badge badge-secondary">Failed</span>';
            html += '<div class="progress mt-1">';
            html += '<div class="progress-bar progress-bar-striped bg-secondary progress-bar-animated" role="progressbar" style="width: 25%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>';
            html += '</div></div>';
            html += '</div>';
          }
          //Target >= Drink = Success
          else if (data[0] >= data[1] == "Success") {
            html += '<div class="col">Category : <span class="ml-2 badge badge-success">Success</span>';
            html += '<div class="progress mt-1">';
            html += '<div class="progress-bar progress-bar-striped bg-success progress-bar-animated" role="progressbar" style="width: 50%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>';
            html += '</div></div>';
            html += '</div>';
          }

          html += '</div>';
          $(".latesthistory").append(html);

        });
      }

      else {
        jQuery(function ($) {

          html = '<div class="fontsizes">';
          html += '<div class="row mt-3 ">';
          html += '<div class="col text-center mycontent-left"><img id="clockicon"src="https://www.transparentpng.com/thumb/clock/amoxZ0-clock-clipart-hd.png" width="30" height="25"  alt=""></div>';
          html += '<div class="col text-center mycontent-left"><img id="drinkicon"src="https://cdn-icons-png.flaticon.com/512/1651/1651824.png" width="30" height="28"  alt=""></div>';
          html += '<div class="col text-center mycontent-left"><img id="targeticon"src="https://www.pngrepo.com/png/219421/512/target.png" width="30" height="25"  alt=""></div>';
          html += '</div>';

          html += '<div class="row">';
          html += '<div class="col text-center mycontent-left">Date :</div>';
          html += '<div class="col text-center mycontent-left">Volume Drink :</div>';
          html += '<div class="col text-center mycontent-left">Target :</div>';
          html += '</div>'

          html += '<div class="row ">';
          date = data[2][i][0].split(" ");
          html += '<div class="col text-center mycontent-left">' + date[0]+'<br/>'+date[1] + '</div>';
          html += '<div class="col text-center mycontent-left">' + data[2][i][1] + ' ml</div>';
          html += '<div class="col text-center mycontent-left">' + data[0] + ' ml</div>';
          html += '</div>';

          html += '<div class="row mb-2">'

          //Target < Drink = Failed
          if (data[0] < data[1] == "Failed") {
            html += '<div class="col">Category : <span class="ml-2 badge badge-secondary">Failed</span>';
            html += '<div class="progress mt-1">';
            html += '<div class="progress-bar progress-bar-striped bg-secondary progress-bar-animated" role="progressbar" style="width: 25%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>';
            html += '</div></div>';
            html += '</div>';
          }
          //Target >= Drink = Success
          else if (data[0] >= data[1] == "Success") {
            html += '<div class="col">Category : <span class="ml-2 badge badge-success">Success</span>';
            html += '<div class="progress mt-1">';
            html += '<div class="progress-bar progress-bar-striped bg-success progress-bar-animated" role="progressbar" style="width: 50%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>';
            html += '</div></div>';
            html += '</div>';
          }

          html += '</div>'
          $(".otherhistory").append(html);

        });

      }
    }
  }
 

  </script>
